<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CERO | Neo-Beta</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Outfit:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --neon-purple: #9d4edd; --neon-cyan: #00f5d4; --dark-space: #0b090a; --card-bg: #161a1d; }
        body { background: var(--dark-space); color: white; font-family: 'Outfit', sans-serif; margin: 0; padding-bottom: 100px; overflow-x: hidden; }
        
        /* Encabezado Estilo Gaming */
        header { padding: 20px; text-align: center; background: linear-gradient(180deg, rgba(157,78,221,0.2) 0%, transparent 100%); border-bottom: 1px solid var(--neon-purple); }
        h1 { font-family: 'Syncopate', sans-serif; font-size: 1.5rem; text-transform: uppercase; letter-spacing: 5px; margin: 0; color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan); }

        #feed { max-width: 450px; margin: 20px auto; padding: 0 15px; }
        
        /* Tarjetas Estilo Discord */
        .post { background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 20px; border: 1px solid #2d3135; position: relative; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .post:hover { border-color: var(--neon-purple); transform: translateY(-3px); }
        .post-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; color: var(--neon-purple); font-weight: 600; font-size: 0.9rem; }
        .avatar { width: 35px; height: 35px; background: #333; border-radius: 8px; border: 1px solid var(--neon-purple); }
        .post-content { font-size: 1rem; line-height: 1.5; color: #e0e1dd; }
        .gif-container img { width: 100%; border-radius: 8px; margin-top: 10px; border: 1px solid #444; }

        .post-footer { margin-top: 15px; display: flex; justify-content: space-between; align-items: center; }
        .like-btn { background: #24282c; border: 1px solid #444; color: #888; padding: 5px 12px; border-radius: 6px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 5px; }
        .like-btn.active { border-color: var(--neon-cyan); color: var(--neon-cyan); box-shadow: 0 0 8px var(--neon-cyan); }

        /* Botón Flotante Gigante */
        .fab { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--neon-purple); border-radius: 18px; border: none; color: white; font-size: 2rem; cursor: pointer; box-shadow: 0 0 20px var(--neon-purple); z-index: 100; transition: 0.3s; }
        .fab:hover { transform: rotate(90deg) scale(1.1); }

        /* Modal Moderno */
        #modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 200; padding: 20px; }
        .modal-content { max-width: 500px; margin: auto; background: var(--card-bg); padding: 20px; border-radius: 20px; border: 1px solid var(--neon-purple); }
        textarea { width: 100%; height: 120px; background: #000; border: 1px solid #333; color: white; padding: 10px; border-radius: 10px; resize: none; outline: none; box-sizing: border-box; }
        .gif-search { margin-top: 10px; width: 100%; padding: 8px; background: #222; border: 1px solid #444; color: white; border-radius: 5px; }
        .pub-btn { width: 100%; margin-top: 15px; background: var(--neon-cyan); color: black; border: none; padding: 12px; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; }
    </style>
</head>
<body>

    <header><h1>CE<span>RO</span></h1></header>

    <div id="feed"></div>

    <button class="fab" onclick="abrirModal()">+</button>

    <div id="modal">
        <div class="modal-content">
            <h2 style="color: var(--neon-purple); margin-top: 0;">NUEVO POST</h2>
            <textarea id="textoInput" placeholder="Suelta el beta aquí..."></textarea>
            <input type="text" id="gifInput" class="gif-search" placeholder="Pegar URL de GIF o Sticker (opcional)">
            <button class="pub-btn" onclick="subirPost()">Lanzar al espacio</button>
            <button onclick="cerrarModal()" style="background: none; border: none; color: #666; width: 100%; margin-top: 10px; cursor: pointer;">Cancelar</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyBqWmGTsmfFJSy9x5ld9Rb5u9GEBBKF2FE",
          authDomain: "venepop-b642b.firebaseapp.com",
          databaseURL: "https://venepop-b642b-default-rtdb.firebaseio.com/",
          projectId: "venepop-b642b",
          storageBucket: "venepop-b642b.firebasestorage.app",
          messagingSenderId: "257279813856",
          appId: "1:257279813856:web:32733306545744437e8885"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function abrirModal() { document.getElementById('modal').style.display='flex'; }
        function cerrarModal() { document.getElementById('modal').style.display='none'; }

        async function subirPost() {
            const texto = document.getElementById('textoInput').value;
            const gif = document.getElementById('gifInput').value;
            if(!texto && !gif) return;

            await db.ref('posts').push({
                texto: texto,
                gif: gif,
                likes: 0,
                fecha: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
            });

            cerrarModal();
            document.getElementById('textoInput').value='';
            document.getElementById('gifInput').value='';
        }

        function darLike(id) {
            const yaDioLike = localStorage.getItem('like_' + id);
            if (yaDioLike) {
                alert("Ya le diste energía a este post.");
                return;
            }
            db.ref('posts/' + id + '/likes').transaction(l => (l || 0) + 1);
            localStorage.setItem('like_' + id, true);
        }

        db.ref('posts').on('value', res => {
            const feed = document.getElementById('feed');
            feed.innerHTML = "";
            const posts = [];
            res.forEach(p => { posts.push({id: p.key, ...p.val()}); });
            
            posts.reverse().forEach(d => {
                const likedClass = localStorage.getItem('like_' + d.id) ? 'active' : '';
                feed.insertAdjacentHTML('beforeend', `
                    <div class="post">
                        <div class="post-header">
                            <div class="avatar"></div>
                            <span>ANÓNIMO @neo-cero</span>
                        </div>
                        <div class="post-content">${d.texto}</div>
                        ${d.gif ? `<div class="gif-container"><img src="${d.gif}"></div>` : ''}
                        <div class="post-footer">
                            <button class="like-btn ${likedClass}" onclick="darLike('${d.id}')">
                                ⚡ ${d.likes || 0}
                            </button>
                            <span style="color:#444; font-size:0.7rem;">${d.fecha}</span>
                        </div>
                    </div>
                `);
            });
        });
    </script>
</body>
</html>